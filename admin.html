<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>MD CELL | Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="assets/css/admin.css">
<link rel="stylesheet" href="assets/css/components.css">
</head>

<body>

<!-- ================== PROTEKSI LOGIN ADMIN ================== -->
<script src="assets/js/core.js"></script>
<script>
const auth = DB.get("auth");
if(!auth || auth.role !== "admin"){
  location.href = "index.html";
}
</script>
<!-- ========================================================== -->

<header class="topbar">
  <div class="brand">
    <img src="assets/img/logo.png" alt="MD CELL">
    <div>
      <h1>MD CELL</h1>
      <span>Admin Panel</span>
    </div>
  </div>
  <div class="welcome">Selamat datang, Admin!</div>
</header>

<section class="stats">
  <div class="stat-card">
    <p>Saldo Awal</p>
    <h2 id="saldoAwal">Rp 0</h2>
  </div>
  <div class="stat-card green">
    <p>Uang Laci</p>
    <h2 id="uangLaci">Rp 0</h2>
  </div>
  <div class="stat-card">
    <p>E-Wallet</p>
    <h2 id="totalWallet">0 Akun</h2>
  </div>
  <div class="stat-card">
    <p>Stok Item</p>
    <h2 id="totalItem">0 Item</h2>
  </div>
</section>

<nav class="menu">
  <button class="active">Dashboard</button>
  <button onclick="location.href='pengaturan.html'">Pengaturan</button>
  <button onclick="location.href='rekap.html'">Rekap Data</button>
</nav>

<section class="shift-box">
  <div class="shift-header">
    <h2 id="shiftTitle">SHIFT BELUM DIMULAI</h2>
    <button id="btnShift" class="btn-start" onclick="handleShift()">START</button>
  </div>
  <p class="shift-desc" id="shiftDesc">Klik tombol START untuk memulai shift</p>

  <div class="shift-info">
    <div>
      <span>Shift ID</span>
      <strong id="shiftPrev">-</strong>
    </div>
    <div>
      <span>Saldo Awal</span>
      <strong id="shiftSaldo">Rp 0</strong>
    </div>
  </div>
</section>

<div class="actions">
  <button onclick="exportExcelMultiSheet()">Export Excel</button>
  <button class="logout" onclick="logout()">Logout</button>
</div>

<!-- ================== POPUP TUTUP SHIFT ================== -->
<div class="popup-overlay" id="popupCloseShift">
  <div class="popup-card">

    <div class="popup-title">Tutup Shift</div>

    <div class="popup-row">
      <span>Saldo Awal</span>
      <span id="rSaldoAwal">Rp 0</span>
    </div>

    <div class="popup-row">
      <span>Total Transaksi</span>
      <span id="rTotalTrx">0</span>
    </div>

    <div class="popup-row">
      <strong>Total Income</strong>
      <strong id="rIncome">Rp 0</strong>
    </div>

    <div class="popup-row">
      <span>Saldo Akhir</span>
      <span id="rSaldoAkhir">Rp 0</span>
    </div>

    <div class="popup-footer">
      <button class="btn btn-cancel" onclick="closeShiftPopup()">Batal</button>
      <button class="btn btn-danger" onclick="confirmCloseShift()">Tutup Shift</button>
    </div>

  </div>
</div>
<!-- ====================================================== -->

<!-- ================== SCRIPT ================== -->
<script src="assets/js/admin.js"></script>
<script src="assets/js/export.js"></script>
<script src="assets/js/theme.js"></script>

<script>
renderAdminDashboard();
</script>
<!-- ============================================ -->

</body>
</html>
